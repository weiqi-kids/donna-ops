# Donna-Ops 設定檔
# 複製此檔案為 config.yaml 並填入您的設定

# 主機識別
host_name: "my-server"

# Linode API 設定
# 取得 API Token: https://cloud.linode.com/profile/tokens
linode_api_token: ""
linode_instance_id: ""

# GitHub 設定
# 格式: owner/repo
# 設定為 "auto" 或留空會自動從 git remote 偵測
github_repo: "auto"

# 閾值設定
thresholds:
  cpu_percent: 80       # CPU 使用率警告閾值
  memory_percent: 85    # 記憶體使用率警告閾值
  disk_percent: 90      # 磁碟使用率警告閾值
  load_per_cpu: 2.0     # 每 CPU 負載警告閾值

# 檢查間隔
# 設定為 -1 可停用該功能
intervals:
  periodic_check_minutes: 5    # 定期檢查間隔（分鐘），-1 停用
  alert_poll_seconds: 60       # Linode 警報輪詢間隔（秒），-1 停用

# 通知設定（全部選填，可全部留空）
notifications:
  # Slack Webhook URL（選填）
  # 建立方式: https://api.slack.com/messaging/webhooks
  slack_webhook: ""

  # Telegram Bot 設定（選填）
  # 建立 Bot: https://t.me/botfather
  telegram_bot_token: ""
  telegram_chat_id: ""

# 自動修復設定
remediation:
  # 是否啟用自動修復
  enabled: true

  # 低風險動作自動執行
  auto_low_risk: true

  # 修復動作冷卻時間（秒）
  cooldown_seconds: 300

  # 需要人工確認的嚴重度等級
  human_confirm_severity:
    - high
    - critical

# Issue 管理
issues:
  # 連續正常次數以自動關閉 Issue
  normal_threshold: 3

  # Issue 標題前綴
  title_prefix: "[Donna-Ops]"

# 狀態回報設定
# 將主機狀態回報到 GitHub Issue，方便遠端監控所有主機
status_report:
  # 是否啟用狀態回報
  enabled: true

  # 回報間隔（分鐘）
  # 建議值：30-60 分鐘，避免過於頻繁
  interval_minutes: 30

  # 發生錯誤時立即回報（不受間隔限制）
  report_on_error: true

  # 是否在每次檢查後都回報（會產生大量留言）
  # 建議保持 false，僅依據 interval_minutes 回報
  report_every_check: false

# 自動更新設定
# 當 GitHub 有新版本時自動更新
auto_update:
  # 是否啟用自動更新
  enabled: true

  # 追蹤的分支（通常是 main 或 master）
  branch: "main"

  # 檢查更新間隔（分鐘）
  # 建議值：60-240 分鐘
  interval_minutes: 60

  # 更新後自動重啟服務
  auto_restart: true

# 日誌設定
logging:
  # 日誌等級: DEBUG, INFO, WARN, ERROR
  level: INFO

  # 日誌輪替設定
  rotate:
    # 單一日誌檔案大小上限（bytes）
    # 預設 10MB = 10485760
    max_size_bytes: 10485760

    # 保留的備份數量
    keep_backups: 5

    # 清理超過 N 天的舊日誌
    cleanup_days: 30

# 重試機制設定
retry:
  # 最大重試次數
  max_attempts: 4

  # 初始延遲（秒）
  initial_delay: 2

  # 最大延遲（秒）
  max_delay: 30

# Claude AI 設定
claude:
  # Claude CLI 路徑（留空使用預設）
  cli_path: ""

  # AI 分析超時（秒）
  timeout: 120

  # 是否預設使用 AI 分析
  default_ai: false
